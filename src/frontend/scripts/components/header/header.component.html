<!--
  ~ Copyright (C) 2016 AptiTekk, LLC. (https://AptiTekk.com/) - All Rights Reserved
  ~ Unauthorized copying of any part of AptiBook, via any medium, is strictly prohibited.
  ~ Proprietary and confidential.
  -->

<div class="header-padding"></div>
<div class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"
                    *ngIf="!nonInteractive">
                <span class="sr-only">Toggle Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a [style.cursor]="nonInteractive ? 'default' : 'pointer'"
               [style.pointer-events]="nonInteractive ? 'none' : 'all'"
               [routerLink]="['', 'secure', 'dashboard']" class="navbar-brand">
                <img src="logo.svg"/>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-collapse" *ngIf="!nonInteractive">
            <div id="header">

                <ul class="nav navbar-nav navbar-right" *ngIf="user">

                    <!-- Reservation Management Dropdown -->
                    <li class="dropdown" *ngIf="user.admin || (user.userGroups && user.userGroups.length > 0)">
                        <a data-toggle="dropdown">
                            <span><i class="fa fa-calendar-check-o"></i></span>
                            Reservation Management
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li *ngFor="let link of reservationManagementLinks" [routerLinkActive]="'active'">
                                <a href="#" [routerLink]="['', 'secure', 'management', link.path]">
                                    <span><i class="fa fa-{{link.icon}}"></i></span>
                                    {{link.label}}
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- AptiBook Configuration Dropdown -->
                    <!-- TODO: Allow users to see things if they have permission -->
                    <li class="dropdown" *ngIf="user.admin">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <span><i class="fa fa-cogs"></i></span>
                            AptiBook Configuration
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li *ngFor="let link of configurationLinks"
                                [routerLinkActive]="'active'">
                                <a href="#"
                                   [routerLink]="['', 'secure', 'configuration', link.path]"
                                   [ngStyle]="{'padding-left': link.indented ? '25px' : null}">
                                    <span><i class="fa fa-{{link.icon}}"></i></span>
                                    {{link.label}}
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- User Dropdown -->
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <span><i class="fa fa-user"></i></span>
                            {{user.fullName}}
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li [routerLinkActive]="'active'">
                                <a href="#" [routerLink]="['', 'secure', 'my', 'account']">
                                    <span><i class="fa fa-pencil"></i></span>
                                    My Account
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a (click)="onSignOut()" style="cursor:pointer;">
                                    <span><i class="fa fa-sign-out"></i></span>
                                    Sign Out
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- Notifications Link -->
                    <li class="nav-notifications">
                        <a href="#" [routerLink]="['', 'secure', 'my', 'notifications']">
                            <span><i class="fa fa-bell"></i></span>
                            <span class="notifications-badge badge" *ngIf="unreadNotifications.length > 0">{{unreadNotifications.length}}</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
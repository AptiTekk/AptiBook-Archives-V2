<!--
  ~ Copyright (C) 2016 AptiTekk, LLC. (https://AptiTekk.com/) - All Rights Reserved
  ~ Unauthorized copying of any part of AptiBook, via any medium, is strictly prohibited.
  ~ Proprietary and confidential.
  -->

<modal #modal [title]="'Editing Resource \'' + resource?.name + '\''"
       [cancelButtonLabel]="'Cancel'"
       [submitButtonLabel]="'Save Resource'"
       [submitButtonDisabled]="formGroup.invalid"
       (onSubmit)="onSubmitted()"
       (onCancel)="close()">
    <modal-body>
        <form [formGroup]="formGroup">
            <div class="row">
                <div class="col-xs-6 col-sm-4 col-md-3">
                    <image-uploader #imageUploader
                                    [currentImageUrl]="resource?.hasImage ? apiService.getApiUrlFromEndpoint('/resources/' + resource.id + '/image') : null">
                    </image-uploader>
                </div>
                <div class="col-xs-12 col-sm-8 col-md-9">
                    <form-group [control]="formGroup.controls['name']"
                                [label]="'Name'"
                                [placeholder]="'Must be unique'"
                                [errorMessages]="
                                    {
                                    required: 'This is required.',
                                    pattern: 'These characters are not allowed:  < > ; =',
                                    maxlength: 'This must be 30 characters or less.'
                                    }">
                    </form-group>
                    <div class="form-group">
                        <label>Do Reservations Require Approval?</label>
                        <br/>
                        <toggle-switch [onText]="'Yes'" [offText]="'No'" style="margin-right: 10px"
                                       formControlName="needsApproval">
                        </toggle-switch>
                    </div>
                    <div class="form-group">
                        <label>Which User Group owns this Resource?</label>
                        <tree [selectable]="true" formControlName="owner">
                        </tree>
                    </div>
                </div>
            </div>
        </form>
    </modal-body>
</modal>
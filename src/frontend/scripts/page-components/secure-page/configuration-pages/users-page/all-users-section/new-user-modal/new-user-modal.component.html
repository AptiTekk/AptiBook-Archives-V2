<!--
  ~ Copyright (C) 2016 AptiTekk, LLC. (https://AptiTekk.com/) - All Rights Reserved
  ~ Unauthorized copying of any part of AptiBook, via any medium, is strictly prohibited.
  ~ Proprietary and confidential.
  -->

<modal #modal
	   [title]="'New User'"
	   [cancelButtonLabel]="'Cancel'"
	   [submitButtonLabel]="'Add User'"
	   [submitButtonDisabled]="formGroup.invalid"
	   (onSubmit)="onUserSubmitted()">
	<modal-body>
		<alert #dangerAlert
			   [severity]="'danger'"></alert>
		
		<form [formGroup]="formGroup">
			<form-group [control]="formGroup.controls['emailAddress']"
						[label]="'Email Address'"
						[faIconName]="'at'"
						[errorMessages]="
                                    {
                                    required: 'This is required.',
                    				pattern: 'These characters are not allowed:  < > ; =',
                    				maxlength: 'This must be 100 characters or less.',
                                    isUnique: 'A User with this email address already exists!'
                                    }">
			</form-group>
			
			<form-group [control]="formGroup.controls['firstName']"
						[label]="'First Name'"
						[errorMessages]="
                                    {
                                    pattern: 'These characters are not allowed:  < > ; =',
                                    maxlength: 'This must be 30 characters or less.'
                                    }">
			</form-group>
			
			<form-group [control]="formGroup.controls['lastName']"
						[label]="'Last Name'"
						[errorMessages]="
									{
									pattern: 'These characters are not allowed:  < > ; =',
									maxlength: 'This must be 30 characters or less.'
									}">
			</form-group>
			
			<form-group [control]="formGroup.controls['phoneNumber']"
						[label]="'Phone Number'"
						[faIconName]="'phone'"
						[errorMessages]="
                                    {
                                    pattern: 'These characters are not allowed:  < > ; =',
                                    maxlength: 'This must be 30 characters or less.'
                                    }">
			</form-group>
			
			<form-group [control]="formGroup.controls['location']"
						[label]="'Location'"
						[faIconName]="'map-marker'"
						[errorMessages]="
                                    {
                                    pattern: 'These characters are not allowed:  < > ; =',
                                    maxlength: 'This must be 250 characters or less.'
                                    }">
			</form-group>
			
			<label class="control-label">Assigned User Groups</label>
			<tree [selectable]="true"
				  [selectMultiple]="true"
				  [preventSameBranchSelection]="true"
				  formControlName="userGroups">
			</tree>
			
			<hr/>
			
			<p>Note: The User's password will be generated and emailed to them.</p>
		</form>
	</modal-body>
</modal>
<!--
  ~ Copyright (C) 2016 AptiTekk, LLC. (https://AptiTekk.com/) - All Rights Reserved
  ~ Unauthorized copying of any part of AptiBook, via any medium, is strictly prohibited.
  ~ Proprietary and confidential.
  -->

<div class="container-fluid">
	<div class="row">
		<div class="col-12">
			<at-card id="categories-card"
					 [noTopBorder]="true">
				<at-card-header>
					<ul class="nav nav-tabs card-header-tabs">
						<li class="nav-item"
							*ngFor="let permissionGroup of permissionGroups">
							<a class="nav-link"
							   [routerLink]="'/secure/configuration/permissions/' + permissionGroup.key.toLowerCase()"
							   [routerLinkActive]="'active'">
								{{permissionGroup.name}}
							</a>
						</li>
					</ul>
				</at-card-header>
				<at-card-block>
					<div *ngIf="currentPermissionGroup != undefined">
						<div *ngFor="let permission of currentPermissionGroup.permissions">
							<div class="row pb-3">
								<div class="col-12">
									<h3>{{permission.name}}</h3>
									<hr/>
								</div>
								<div class="col-12 col-md-6">
									<p [innerHTML]="permission.description"></p>
								</div>
								<div class="col-6 col-md-3">
									<at-card [title]="'Assigned Users'"
											 [noTopBorder]="true">
										<at-card-block>
											<ul *ngIf="userAssignments != undefined">
												<li *ngFor="let user of getUserAssignmentsForPermission(permission)">
													{{user.emailAddress}}
												</li>
											</ul>
											<p *ngIf="userAssignments == undefined || getUserAssignmentsForPermission(permission).length == 0">
												No Users are assigned.
											</p>
										</at-card-block>
										<at-card-footer>
											<button class="btn btn-secondary">
												Change Assignments
											</button>
										</at-card-footer>
									</at-card>
								</div>
								<div class="col-6 col-md-3">
									<at-card [title]="'Assigned Groups'"
											 [noTopBorder]="true">
										<at-card-block>
											<ul *ngIf="userGroupAssignments != undefined">
												<li *ngFor="let userGroup of getUserGroupAssignmentsForPermission(permission)">
													{{userGroup.name}}
												</li>
											</ul>
											<p *ngIf="userGroupAssignments == undefined || getUserGroupAssignmentsForPermission(permission).length == 0">
												No User Groups are assigned.
											</p>
										</at-card-block>
										<at-card-footer>
											<button class="btn btn-secondary">
												Change Assignments
											</button>
										</at-card-footer>
									</at-card>
								</div>
							</div>
						</div>
					</div>
				</at-card-block>
			</at-card>
		</div>
	</div>
</div>
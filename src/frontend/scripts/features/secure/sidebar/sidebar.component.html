<!--
  ~ Copyright (C) 2016 AptiTekk, LLC. (https://AptiTekk.com/) - All Rights Reserved
  ~ Unauthorized copying of any part of AptiBook, via any medium, is strictly prohibited.
  ~ Proprietary and confidential.
  -->

<div id="sidebar"
	 (swiperight)="onSwipeRight()"
	 (swipeleft)="onSwipeLeft()"
	 [class.closed]="!swipedOpen">
	<div id="header">
		<a href="#"
		   [routerLink]="['', 'secure', 'dashboard']"
		   id="logo">
			<div id="logo-image"></div>
		</a>
	</div>
	
	<div id="notifications"
		 [class.unread]="unreadNotifications.length > 0"
		 [routerLink]="['', 'secure', 'user', 'notifications']"
		 [routerLinkActive]="'active'">
		<i class="fa fa-bell"
		   aria-hidden="true"></i>
		<span id="notifications-count-label">{{(unreadNotifications.length > 0 ? unreadNotifications.length + ' Unread Notification' : '0 Unread Notification')
		+ (unreadNotifications.length === 1 ? '' : 's')}}</span>
	</div>
	
	<div id="content">
		<accordion-navigation [canCollapse]="false">
			<accordion-navigation [link]="['', 'secure', 'dashboard']"
								  [icon]="'dashboard'"
								  [label]="'Dashboard'"
								  [exactLinkMatching]="true">
				<accordion-navigation [link]="['', 'secure', 'dashboard', 'upcoming']"
									  [icon]="'list'"
									  [label]="'Upcoming Reservations'">
				</accordion-navigation>
			</accordion-navigation>
			<accordion-navigation [link]="['', 'secure', 'user', 'account']"
								  [icon]="'user'"
								  [label]="'My Account'">
			</accordion-navigation>
			<accordion-navigation [icon]="'calendar-check-o'"
								  [label]="'Reservation Management'"
								  *ngIf="user?.admin || user?.userGroups?.length > 0">
				<accordion-navigation [link]="['', 'secure', 'management', 'queue']"
									  [icon]="'hourglass-half'"
									  [label]="'Approval Queue'">
				</accordion-navigation>
				<accordion-navigation [link]="['', 'secure', 'management', 'approved']"
									  [icon]="'calendar-check-o'"
									  [label]="'Approved Reservations'">
				</accordion-navigation>
				<accordion-navigation [link]="['', 'secure', 'management', 'rejected']"
									  [icon]="'calendar-times-o'"
									  [label]="'Rejected Reservations'">
				</accordion-navigation>
				<accordion-navigation [link]="['', 'secure', 'management', 'calendar']"
									  [icon]="'calendar'"
									  [label]="'Reservation Calendar'">
				</accordion-navigation>
			</accordion-navigation>
			<accordion-navigation [icon]="'cogs'"
								  [label]="'AptiBook Configuration'"
								  *ngIf="user?.admin || userPermissions.length > 0">
				<accordion-navigation [link]="['', 'secure', 'configuration', 'resources']"
									  [icon]="'tags'"
									  [label]="'Resources'"
									  *ngIf="hasPermission(['RESOURCE_CATEGORIES_MODIFY_ALL', 'RESOURCES_MODIFY_OWN', 'RESOURCES_MODIFY_HIERARCHY', 'RESOURCES_MODIFY_ALL'])">
				</accordion-navigation>
				<accordion-navigation [link]="['', 'secure', 'configuration', 'users']"
									  [icon]="'user'"
									  [label]="'Users'"
									  *ngIf="hasPermission(['USERS_MODIFY_ALL', 'GROUPS_MODIFY_ALL'])">
				</accordion-navigation>
				<!--<accordion-navigation [link]="['', 'secure', 'configuration', 'permissions']"
									  [icon]="'unlock'"
									  [label]="'Permissions'"
									  *ngIf="hasPermission(['PERMISSIONS_MODIFY_ALL'])">
				</accordion-navigation>-->
				<accordion-navigation [link]="['', 'secure', 'configuration', 'properties']"
									  [icon]="'cog'"
									  [label]="'Properties'"
									  *ngIf="hasPermission(['PROPERTIES_MODIFY_ALL'])">
				</accordion-navigation>
			</accordion-navigation>
		</accordion-navigation>
	</div>
	
	<div id="user">
		<i class="fa fa-user"
		   aria-hidden="true"></i>
		
		<span id="user-name">{{user?.fullName}}</span>
		
		<button id="sign-out-button"
				(click)="onSignOut()"
				class="btn-none">
			<i class="fa fa-sign-out"
			   aria-hidden="true"></i>
		</button>
	</div>
</div>